{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../css/AdminReservation.css';import{fetchReservations}from'../../store/actions/reservationActions';import{connect}from'react-redux';import ModalReservation from'../../components/admin/modal/ModalReservation';import FormNewReservation from'../../components/admin/form/FormNewReservation';import{Modal,Button,ModalHeader,ModalBody}from'reactstrap';var AdminReservation=/*#__PURE__*/function(_Component){_inherits(AdminReservation,_Component);function AdminReservation(props){var _this;_classCallCheck(this,AdminReservation);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdminReservation).call(this,props));_this.updateSearch=function(e){_this.setState({search:e.target.value});};_this.handleSubmit=function(e){var _this$state=_this.state,name=_this$state.name,surname=_this$state.surname,phone=_this$state.phone,email=_this$state.email,address=_this$state.address,date=_this$state.date,hour=_this$state.hour,info=_this$state.info;e.preventDefault();_this.props.postReservation(name,surname,phone,email,address,date,hour,info);};_this.state={modal:false,search:''};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(AdminReservation,[{key:\"toggle\",value:function toggle(){this.setState(function(prevState){return{modal:!prevState.modal};});}},{key:\"componentDidMount\",value:function componentDidMount(){this.props.fetchReservations();}},{key:\"render\",value:function render(){var _this2=this;var filteredReservations=this.props.reservation.filter(function(reservation){return reservation.name.toLowerCase().indexOf(_this2.state.search.toLowerCase())!==-1||reservation.surname.toLowerCase().indexOf(_this2.state.search.toLowerCase())!==-1||reservation.date.toLowerCase().indexOf(_this2.state.search.toLowerCase())!==-1||reservation.phone.toLowerCase().indexOf(_this2.state.search.toLowerCase())!==-1;});var closeBtn=React.createElement(\"button\",{className:\"close\",onClick:this.toggle},\"\\xD7\");var r=filteredReservations.map(function(r){return React.createElement(ModalReservation,{key:r._id,reservation:r});});return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"container\"},React.createElement(\"input\",{className:\"search-reservation form-search form-control mr-sm-2\",type:\"search\",onChange:this.updateSearch.bind(this),placeholder:\"Search\",name:\"search\",value:this.state.search}),React.createElement(Button,{className:\"button-create\",onClick:this.toggle},\"Nouveau\"),React.createElement(Modal,{isOpen:this.state.modal,toggle:this.toggle,centered:true},React.createElement(ModalHeader,{className:\"modal-header\",close:closeBtn},\"Nouvelle Reservation\"),React.createElement(ModalBody,null,React.createElement(FormNewReservation,null))),React.createElement(\"div\",{className:\"admin\"},React.createElement(\"ul\",{className:\"list-group\"},r))));}}]);return AdminReservation;}(Component);var mapStateToProps=function mapStateToProps(state){return{reservation:state.reservations.reservation};};export default connect(mapStateToProps,{fetchReservations:fetchReservations})(AdminReservation);","map":{"version":3,"sources":["C:/Users/nadja/Documents/GitHub/Cleaners/client/src/containers/pages/AdminReservation.js"],"names":["React","Component","fetchReservations","connect","ModalReservation","FormNewReservation","Modal","Button","ModalHeader","ModalBody","AdminReservation","props","updateSearch","e","setState","search","target","value","handleSubmit","state","name","surname","phone","email","address","date","hour","info","preventDefault","postReservation","modal","toggle","bind","prevState","filteredReservations","reservation","filter","toLowerCase","indexOf","closeBtn","r","map","_id","mapStateToProps","reservations"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../css/AdminReservation.css';\nimport { fetchReservations } from '../../store/actions/reservationActions';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport ModalReservation from '../../components/admin/modal/ModalReservation';\nimport FormNewReservation from '../../components/admin/form/FormNewReservation';\nimport { Modal, Button, ModalHeader, ModalBody} from 'reactstrap';\n\nclass AdminReservation extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          modal: false,\n          search: ''\n        };\n        this.toggle = this.toggle.bind(this);\n    }\n\n    toggle() {\n        this.setState(prevState => ({\n          modal: !prevState.modal\n        }));\n      }\n    componentDidMount() {\n        this.props.fetchReservations()\n    }\n    updateSearch = (e) => {\n        this.setState ({search: e.target.value})\n      }\n    \n      handleSubmit = (e) => {\n        const { name, surname, phone, email, address, date, hour, info } = this.state\n        e.preventDefault()\n        this.props.postReservation(name, surname, phone, email, address, date, hour, info)\n      }\n    \n    render() {\n        const filteredReservations = this.props.reservation.filter(\n            (reservation) => {\n                return (\n                reservation.name.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1 ||\n                reservation.surname.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1 ||\n                reservation.date.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1 ||\n                reservation.phone.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1\n                )\n            }\n        )\n        const closeBtn = <button className=\"close\" onClick={this.toggle}>&times;</button>;\n        const r = filteredReservations.map(r => {\n            return (\n              <ModalReservation\n              key={r._id}\n              reservation={r}\n              />\n            );\n          });\n\n            return (\n                <div>\n                    <div className='container'>\n                    <input className=\"search-reservation form-search form-control mr-sm-2\" type=\"search\" onChange={ this.updateSearch.bind(this) } placeholder=\"Search\" name=\"search\" value={this.state.search} />\n                    <Button className=\"button-create\" onClick={this.toggle}>Nouveau</Button>                  \n                    <Modal isOpen={this.state.modal} toggle={this.toggle} centered>\n                    <ModalHeader className=\"modal-header\" close={closeBtn}>\n                        Nouvelle Reservation\n                    </ModalHeader>\n                    <ModalBody>\n                        <FormNewReservation />\n                    </ModalBody>\n                    </Modal>\n                <div className=\"admin\">\n                    <ul className=\"list-group\">{r}</ul>\n                </div>\n                </div>\n                </div>\n            )\n        }\n    }\n\nconst mapStateToProps = state => ({\n    reservation: state.reservations.reservation\n});\n\nAdminReservation.propTypes = {\n    fetchReservations: PropTypes.func.isRequired,\n}\nexport default connect(mapStateToProps, { fetchReservations })(AdminReservation)\n"]},"metadata":{},"sourceType":"module"}