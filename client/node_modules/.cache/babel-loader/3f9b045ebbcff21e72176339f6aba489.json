{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\nadja\\\\Documents\\\\GitHub\\\\Cleaners\\\\client\\\\src\\\\components\\\\navbar\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { getFromStorage, setInStorage } from '../../config/storage';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { onSignIn } from '../../store/actions/authActions';\nimport { connect } from 'react-redux';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      isLoading: true,\n      isRegistered: false,\n      token: '',\n      signUpError: '',\n      signInError: '',\n      signInEmail: '',\n      signInPassword: '',\n      signUpFirstName: '',\n      signUpLastName: '',\n      signUpEmail: '',\n      signUpPassword: ''\n    };\n    _this.onTextboxChangeSignInEmail = _this.onTextboxChangeSignInEmail.bind(_assertThisInitialized(_this));\n    _this.onTextboxChangeSignInPassword = _this.onTextboxChangeSignInPassword.bind(_assertThisInitialized(_this));\n    _this.onTextboxChangeSignUpEmail = _this.onTextboxChangeSignUpEmail.bind(_assertThisInitialized(_this));\n    _this.onTextboxChangeSignUpPassword = _this.onTextboxChangeSignUpPassword.bind(_assertThisInitialized(_this));\n    _this.onTextboxChangeSignUpFirstName = _this.onTextboxChangeSignUpFirstName.bind(_assertThisInitialized(_this));\n    _this.onTextboxChangeSignUpLastName = _this.onTextboxChangeSignUpLastName.bind(_assertThisInitialized(_this));\n    _this.onSignUp = _this.onSignUp.bind(_assertThisInitialized(_this));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_this));\n    _this.register = _this.register.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var obj = getFromStorage('the_cleaners');\n\n      if (obj && obj.token) {\n        var token = obj.token; // Verify token\n\n        fetch('https://www.thecleanersisrael.com/api/account/verify?token=' + token).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.success) {\n            _this2.setState({\n              token: token,\n              isLoading: false\n            });\n          } else {\n            _this2.setState({\n              isLoading: false\n            });\n          }\n        });\n      } else {\n        this.setState({\n          isLoading: false\n        });\n      }\n    }\n  }, {\n    key: \"onTextboxChangeSignInEmail\",\n    value: function onTextboxChangeSignInEmail(e) {\n      this.setState({\n        signInEmail: e.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignInPassword\",\n    value: function onTextboxChangeSignInPassword(e) {\n      this.setState({\n        signInPassword: e.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpEmail\",\n    value: function onTextboxChangeSignUpEmail(e) {\n      this.setState({\n        signUpEmail: e.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpPassword\",\n    value: function onTextboxChangeSignUpPassword(e) {\n      this.setState({\n        signUpPassword: e.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpFirstName\",\n    value: function onTextboxChangeSignUpFirstName(e) {\n      this.setState({\n        signUpFirstName: e.target.value\n      });\n    }\n  }, {\n    key: \"onTextboxChangeSignUpLastName\",\n    value: function onTextboxChangeSignUpLastName(e) {\n      this.setState({\n        signUpLastName: e.target.value\n      });\n    }\n  }, {\n    key: \"register\",\n    value: function register() {\n      this.setState(function (prevState) {\n        return {\n          isRegistered: !prevState.isRegistered\n        };\n      });\n    }\n  }, {\n    key: \"onSignUp\",\n    value: function onSignUp() {\n      var _this3 = this;\n\n      // Grab state\n      var _this$state = this.state,\n          signUpEmail = _this$state.signUpEmail,\n          signUpPassword = _this$state.signUpPassword,\n          signUpFirstName = _this$state.signUpFirstName,\n          signUpLastName = _this$state.signUpLastName;\n      this.setState({\n        isLoading: true\n      }); // Post request to backend\n\n      fetch('https://www.thecleanersisrael.com/api/account/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: signUpEmail,\n          password: signUpPassword,\n          firstName: signUpFirstName,\n          lastName: signUpLastName\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log('json', json);\n\n        if (json.success) {\n          _this3.setState({\n            signUpError: json.message,\n            isLoading: false,\n            signUpEmail: '',\n            signUpPassword: '',\n            signUpFirstName: '',\n            signUpLastName: ''\n          });\n        } else {\n          _this3.setState({\n            signUpError: json.message,\n            isLoading: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this4 = this;\n\n      this.setState({\n        isLoading: true\n      });\n      var obj = getFromStorage('the_cleaners');\n\n      if (obj && obj.token) {\n        var token = obj.token; // Verify token\n\n        fetch('https://www.thecleanersisrael.com/api/account/logout?token=' + token).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (json.success) {\n            _this4.setState({\n              token: '',\n              isLoading: false\n            });\n\n            setInStorage('the_cleaners', {\n              token: ''\n            });\n          } else {\n            _this4.setState({\n              isLoading: false\n            });\n          }\n        });\n      } else {\n        this.setState({\n          isLoading: false\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          isLoading = _this$state2.isLoading,\n          token = _this$state2.token,\n          isRegistered = _this$state2.isRegistered,\n          signInError = _this$state2.signInError,\n          signUpError = _this$state2.signUpError,\n          signInEmail = _this$state2.signInEmail,\n          signInPassword = _this$state2.signInPassword,\n          signUpFirstName = _this$state2.signUpFirstName,\n          signUpLastName = _this$state2.signUpLastName,\n          signUpPassword = _this$state2.signUpPassword,\n          signUpEmail = _this$state2.signUpEmail;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-center\",\n        style: {\n          color: 'red',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        autoComplete: \"email\",\n        type: \"email\",\n        placeholder: \"Email\",\n        value: signInEmail,\n        onChange: this.onTextboxChangeSignInEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: signInPassword,\n        onChange: this.onTextboxChangeSignInPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '25px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          backgroundColor: '#0E1521',\n          color: 'white'\n        },\n        variant: \"contained\",\n        onClick: this.props.onSignIn(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Sign In\")), React.createElement(\"p\", {\n        onClick: this.register,\n        className: \"text-center\",\n        style: {\n          marginTop: '5%',\n          cursor: 'pointer',\n          color: 'skyblue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Not registered yet ?\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-center\",\n        style: {\n          color: 'red',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        autoComplete: \"family-name\",\n        type: \"text\",\n        placeholder: \"First Name\",\n        value: signUpFirstName,\n        onChange: this.onTextboxChangeSignUpFirstName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        autoComplete: \"given-name\",\n        type: \"text\",\n        placeholder: \"Last Name\",\n        value: signUpLastName,\n        onChange: this.onTextboxChangeSignUpLastName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: signUpEmail,\n        onChange: this.onTextboxChangeSignUpEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: signUpPassword,\n        onChange: this.onTextboxChangeSignUpPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        style: {\n          marginTop: '25px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          backgroundColor: '#0E1521',\n          color: 'white'\n        },\n        variant: \"contained\",\n        onClick: this.onSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Sign Up\"))), React.createElement(\"p\", {\n        onClick: this.register,\n        className: \"text-center\",\n        style: {\n          marginTop: '5%',\n          cursor: 'pointer',\n          color: 'skyblue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Already registered ?\")), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"My Account\"), React.createElement(Button, {\n        variant: \"contained\",\n        style: {\n          backgroundColor: 'red',\n          marginTop: '5%',\n          color: 'white'\n        },\n        className: \"text-center\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Logout\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default connect({\n  onSignIn: onSignIn\n})(Login);","map":{"version":3,"sources":["C:\\Users\\nadja\\Documents\\GitHub\\Cleaners\\client\\src\\components\\navbar\\Login.js"],"names":["React","Component","getFromStorage","setInStorage","Button","TextField","onSignIn","connect","Login","props","state","isLoading","isRegistered","token","signUpError","signInError","signInEmail","signInPassword","signUpFirstName","signUpLastName","signUpEmail","signUpPassword","onTextboxChangeSignInEmail","bind","onTextboxChangeSignInPassword","onTextboxChangeSignUpEmail","onTextboxChangeSignUpPassword","onTextboxChangeSignUpFirstName","onTextboxChangeSignUpLastName","onSignUp","logout","register","obj","fetch","then","res","json","success","setState","e","target","value","prevState","method","headers","body","JSON","stringify","email","password","firstName","lastName","console","log","message","color","fontWeight","marginTop","backgroundColor","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { getFromStorage, setInStorage } from '../../config/storage';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { onSignIn } from '../../store/actions/authActions';\nimport { connect } from 'react-redux';\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: true,\n            isRegistered: false,\n            token: '',\n            signUpError: '',\n            signInError: '',\n            signInEmail: '',\n            signInPassword: '',\n            signUpFirstName: '',\n            signUpLastName: '',\n            signUpEmail: '',\n            signUpPassword: ''\n        };\n    this.onTextboxChangeSignInEmail = this.onTextboxChangeSignInEmail.bind(this);\n    this.onTextboxChangeSignInPassword = this.onTextboxChangeSignInPassword.bind(this);\n    this.onTextboxChangeSignUpEmail = this.onTextboxChangeSignUpEmail.bind(this);\n    this.onTextboxChangeSignUpPassword = this.onTextboxChangeSignUpPassword.bind(this);\n    this.onTextboxChangeSignUpFirstName = this.onTextboxChangeSignUpFirstName.bind(this);\n    this.onTextboxChangeSignUpLastName = this.onTextboxChangeSignUpLastName.bind(this);\n    \n    this.onSignUp = this.onSignUp.bind(this);\n    this.logout = this.logout.bind(this);\n    this.register = this.register.bind(this);\n    }\n  \n    componentDidMount() {\n        const obj = getFromStorage('the_cleaners');\n        if (obj && obj.token) {\n          const { token } = obj;\n          // Verify token\n          fetch('https://www.thecleanersisrael.com/api/account/verify?token=' + token)\n            .then(res => res.json())\n            .then(json => {\n              if (json.success) {\n                this.setState({\n                  token,\n                  isLoading: false\n                });\n              } else {\n                this.setState({\n                  isLoading: false,\n                });\n              }\n            });\n        } else {\n          this.setState({\n            isLoading: false,\n          });\n        }\n      }\n\n      onTextboxChangeSignInEmail(e) {\n          this.setState({\n              signInEmail: e.target.value,\n          })\n      }\n      onTextboxChangeSignInPassword(e) {\n        this.setState({\n            signInPassword: e.target.value,\n        })\n    }\n    onTextboxChangeSignUpEmail(e) {\n        this.setState({\n            signUpEmail: e.target.value,\n        })\n    }\n    onTextboxChangeSignUpPassword(e) {\n        this.setState({\n            signUpPassword: e.target.value,\n        })\n    }\n    onTextboxChangeSignUpFirstName(e) {\n        this.setState({\n            signUpFirstName: e.target.value,\n        })\n    }\n    onTextboxChangeSignUpLastName(e) {\n        this.setState({\n            signUpLastName: e.target.value,\n        })\n    }\n\n    register() {\n        this.setState(prevState => ({\n            isRegistered: !prevState.isRegistered\n          }));\n    }\n\n    onSignUp() {\n        // Grab state\n        const {\n          signUpEmail,\n          signUpPassword,\n          signUpFirstName,\n          signUpLastName\n        } = this.state;\n        this.setState({\n          isLoading: true,\n        });\n        // Post request to backend\n        fetch('https://www.thecleanersisrael.com/api/account/signup', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: signUpEmail,\n            password: signUpPassword,\n            firstName: signUpFirstName,\n            lastName: signUpLastName\n          }),\n        }).then(res => res.json())\n          .then(json => {\n            console.log('json', json);\n            if (json.success) {\n              this.setState({\n                signUpError: json.message,\n                isLoading: false,\n                signUpEmail: '',\n                signUpPassword: '',\n                signUpFirstName: '',\n                signUpLastName: ''\n              });\n            } else {\n              this.setState({\n                signUpError: json.message,\n                isLoading: false,\n              });\n            }\n          });\n      }\n      \n    logout() {\n        this.setState({\n          isLoading: true,\n        });\n        const obj = getFromStorage('the_cleaners');\n        if (obj && obj.token) {\n          const { token } = obj;\n          // Verify token\n          fetch('https://www.thecleanersisrael.com/api/account/logout?token=' + token)\n            .then(res => res.json())\n            .then(json => {\n              if (json.success) {\n                this.setState({\n                  token: '',\n                  isLoading: false\n                });\n                setInStorage('the_cleaners', { token: '' });\n              } else {\n                this.setState({\n                  isLoading: false,\n                });\n              }\n            });\n        } else {\n          this.setState({\n            isLoading: false,\n          });\n        }\n      }\n      \n\n    render() {\n        const { isLoading, token, isRegistered, signInError, signUpError, signInEmail, signInPassword,\n        signUpFirstName, signUpLastName, signUpPassword, signUpEmail } = this.state\n\n      \n      \n            return (\n                    <div>\n                        <p className='text-center' style={{color:'red', fontWeight:'bold'}}>Sign In</p>\n                        <div className='row justify-content-center'>\n                        <TextField autoComplete='email' type='email' placeholder='Email' value={signInEmail} onChange={this.onTextboxChangeSignInEmail} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'15px'}}>\n                        <TextField type='password' placeholder='Password' value={signInPassword} onChange={this.onTextboxChangeSignInPassword} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'25px'}}>\n                        <Button style={{backgroundColor:'#0E1521', color:'white'}} variant='contained' onClick={this.props.onSignIn()}>Sign In</Button>\n                        </div>\n                        <p onClick={this.register} className='text-center' style={{marginTop:'5%', cursor:'pointer', color: 'skyblue'}}>\n                            Not registered yet ?\n                        </p>\n                        <div>    \n                   \n                    <form>\n                        <p className='text-center' style={{color:'red', fontWeight:'bold'}}>Sign Up</p>\n                        <div className='row justify-content-center'>\n                        <TextField autoComplete='family-name' type='text' placeholder='First Name' value={signUpFirstName} onChange={this.onTextboxChangeSignUpFirstName} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'15px'}}>\n                        <TextField autoComplete='given-name' type='text' placeholder=\"Last Name\" value={signUpLastName} onChange={this.onTextboxChangeSignUpLastName} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'15px'}}>\n                        <TextField type='email' placeholder='Email' value={signUpEmail} onChange={this.onTextboxChangeSignUpEmail} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'15px'}}>\n                        <TextField type='password' placeholder='Password' value={signUpPassword} onChange={this.onTextboxChangeSignUpPassword} />\n                        </div>\n                        <div className='row justify-content-center' style={{marginTop:'25px'}}>\n                        <Button style={{backgroundColor:'#0E1521', color:'white'}} variant='contained' onClick={this.onSignUp}>Sign Up</Button>\n                        </div>\n                    </form>\n                    <p onClick={this.register} className='text-center' style={{marginTop:'5%', cursor:'pointer', color: 'skyblue'}}>\n                            Already registered ?\n                    </p>\n                </div>\n                <div className='text-center'>\n                <p>My Account</p>\n                <Button variant='contained' style={{backgroundColor:'red', marginTop: '5%', color:'white'}} className='text-center' onClick={this.logout}>Logout</Button>\n            </div>\n                    </div>\n            )\n      \n      \n    }\n}\n\nexport default connect({ onSignIn })(Login)\n\n"]},"metadata":{},"sourceType":"module"}